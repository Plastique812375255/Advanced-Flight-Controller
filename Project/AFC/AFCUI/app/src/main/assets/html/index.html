<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ¬åœ°HTMLæ¼”ç¤º</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            position: relative;
            -webkit-text-size-adjust: 100%; /* é˜²æ­¢iOSè®¾å¤‡ä¸Šçš„æ–‡æœ¬å¤§å°è‡ªåŠ¨è°ƒæ•´ */
        }
        
        h1 {
            margin: 0;
            padding: 0;
            font-size: 1.5rem; /* å“åº”å¼å­—ä½“å¤§å° */
            white-space: nowrap; /* é˜²æ­¢æ–‡æœ¬æ¢è¡Œ */
            overflow: hidden; /* é˜²æ­¢æ–‡æœ¬æº¢å‡º */
            text-overflow: ellipsis; /* æ–‡æœ¬æº¢å‡ºæ—¶æ˜¾ç¤ºçœç•¥å· */
            max-width: 100%; /* é™åˆ¶æœ€å¤§å®½åº¦ */
        }
        
        /* åœ¨å°å±å¹•ä¸Šè°ƒæ•´å­—ä½“å¤§å° */
        @media screen and (max-width: 768px) {
            h1 {
                font-size: 1.2rem;
            }
        }
        
        /* åœ¨æ›´å°çš„å±å¹•ä¸Šç»§ç»­è°ƒæ•´å­—ä½“å¤§å° */
        @media screen and (max-width: 480px) {
            h1 {
                font-size: 1rem;
            }
        }
        .frame-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* é˜²æ­¢å†…å®¹æº¢å‡ºå¯¼è‡´æ»šåŠ¨æ¡ */
            position: fixed; /* ç¡®ä¿å®¹å™¨å›ºå®šåœ¨è§†å£å†… */
            top: 0;
            left: 0;
        }
        .top-frame {
            height: 11.11%; /* 1/9çš„é«˜åº¦ */
            min-height: 50px; /* ç¡®ä¿æœ€å°é«˜åº¦ */
            background-color: #333;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-align: center;
            padding: 10px 15px;
            box-sizing: border-box;
            position: relative;
            z-index: 10; /* ç¡®ä¿é¡¶éƒ¨æ æ€»æ˜¯å¯è§ */
            flex-shrink: 0; /* é˜²æ­¢é¡¶éƒ¨æ è¢«å‹ç¼© */
        }
        
        /* åˆ é™¤åŒºåŸŸæ ·å¼ */
        .top-frame.delete-active {
            background: linear-gradient(to bottom, rgba(255, 0, 0, 0.8), #333);
            transition: all 0.3s ease;
        }
        
        .top-frame.delete-active.drag-over {
            background: linear-gradient(to bottom, rgb(255, 0, 0), #333);
        }
        
        .delete-zone-text {
            display: none;
            color: white;
            font-weight: bold;
            font-size: 16px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            animation: pulse 2s infinite;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            text-align: center;
        }
        
        .top-frame.delete-active .delete-zone-text {
            display: block;
        }
        
        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }
        
        /* çŠ¶æ€æ˜¾ç¤ºå…ƒç´  */
        .connection-status, .current-time, .battery-status {
            transition: opacity 0.3s ease;
        }
        
        /* ç¼–è¾‘æ¨¡å¼ä¸‹éšè—çŠ¶æ€æ˜¾ç¤ºå…ƒç´  */
        .top-frame.delete-active .connection-status,
        .top-frame.delete-active .current-time,
        .top-frame.delete-active .battery-status {
            opacity: 0;
            visibility: hidden;
        }
        
        /* å¢å¼ºé€€å‡ºç¼–è¾‘æ¨¡å¼æŒ‰é’®çš„æ ·å¼å’Œå¯è§æ€§ */
        #exitEditModeBtn {
            display: none;
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #f44336;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001; /* æé«˜z-indexç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
            font-size: 16px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
            user-select: none; /* é˜²æ­¢æ–‡æœ¬è¢«é€‰ä¸­ */
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç§»åŠ¨è®¾å¤‡ä¸Šçš„ç‚¹å‡»é«˜äº® */
        }
        
        #exitEditModeBtn:hover {
            background-color: #d32f2f;
        }
        
        #exitEditModeBtn:active {
            background-color: #b71c1c;
            transform: translateY(-50%) scale(0.98);
        }
        
        .top-frame.delete-active #exitEditModeBtn {
            display: block;
        }
        
        .bottom-frame {
            height: 88.89%; /* 8/9çš„é«˜åº¦ */
            overflow: hidden;
            position: relative;
            flex-grow: 1; /* å…è®¸åº•éƒ¨æ¡†æ¶è‡ªé€‚åº”å¢é•¿ */
        }
        iframe {
            border: none;
            width: 100%;
            height: 100%;
        }
        
        /* é®ç½©å±‚æ ·å¼ */
        #afcMenuOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999; /* é™ä½é®ç½©å±‚çš„z-index */
            display: none;
        }
        
        /* èœå•æ ·å¼ */
        .menu {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100%;
            background-color: #fff;
            box-shadow: -2px 0 5px rgba(0,0,0,0.1);
            z-index: 1000;
            transition: right 0.3s ease;
            overflow-y: auto;
        }
        
        .menu.show {
            right: 0;
        }
        
        .menu-header {
            padding: 20px;
            background-color: #f5f5f5;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .menu-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }
        
        .menu-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        .menu-content {
            padding: 20px;
        }
        
        .menu-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }
        
        .menu-item:hover {
            background-color: #f5f5f5;
        }
        
        .menu-item .item-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .menu-item .item-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #e3f2fd;
            border-radius: 50%;
            color: #2196F3;
        }
        
        .menu-item .item-text {
            font-size: 16px;
            color: #333;
        }
        
        .menu-item .item-arrow {
            color: #999;
            font-size: 20px;
        }
        
        /* ç»„ä»¶é€‰é¡¹æ ·å¼ */
        .widget-option {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background-color 0.2s;
        }
        
        .widget-option:hover {
            background-color: #f5f5f5;
        }
        
        .widget-option-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #e3f2fd;
            border-radius: 50%;
            color: #2196F3;
            font-size: 14px;
        }
        
        .widget-option-text {
            font-size: 16px;
            color: #333;
        }
        
        /* äºŒçº§èœå•æ ·å¼ */
        .submenu {
            display: none;
            background-color: #f9f9f9;
            padding-left: 20px;
        }
        
        .submenu.show {
            display: block;
        }
        
        .submenu-item {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }
        
        .submenu-item:hover {
            background-color: #f5f5f5;
        }
        
        .submenu-item .item-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .submenu-item .item-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #e3f2fd;
            border-radius: 50%;
            color: #2196F3;
            font-size: 14px;
        }
        
        .submenu-item .item-text {
            font-size: 14px;
            color: #666;
        }
        
        .submenu-item .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
        }
        
        .submenu-item .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .submenu-item .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .submenu-item .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        .submenu-item input:checked + .toggle-slider {
            background-color: #2196F3;
        }
        
        .submenu-item input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        /* è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .connection-status {
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            background-color: gray;
        }
        
        .status-connected {
            background-color: #4CAF50; /* ç»¿è‰² - å·²è¿æ¥ */
        }
        
        .status-disconnected {
            background-color: #F44336; /* çº¢è‰² - æœªè¿æ¥ */
        }
        
        .status-transmitting {
            background-color: #FFC107; /* é»„è‰² - ä¼ è¾“ä¸­ */
            animation: blink 1.5s infinite;
        }
        
        @keyframes blink {
            0% { opacity: 0.4; }
            50% { opacity: 1; }
            100% { opacity: 0.4; }
        }
        
        /* å½“å‰æ—¶é—´æ ·å¼ */
        .current-time {
            font-size: 18px;
            font-weight: bold;
        }
        
        /* ç”µæ± ç”µé‡æ ·å¼ */
        .battery-status {
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        
        .battery-icon {
            position: relative;
            width: 22px;
            height: 12px;
            border: 1px solid white;
            border-radius: 2px;
            margin-right: 5px;
        }
        
        .battery-icon::after {
            content: '';
            position: absolute;
            top: 2px;
            right: -4px;
            width: 3px;
            height: 8px;
            background-color: white;
            border-radius: 0 2px 2px 0;
        }
        
        .battery-level {
            position: absolute;
            top: 1px;
            left: 1px;
            height: 10px;
            background-color: #4CAF50;
            border-radius: 1px;
        }
        
        .battery-low {
            background-color: #F44336;
        }
        
        .battery-charging {
            background-color: #2196F3;
        }
    </style>
</head>
<body>
    <div class="frame-container">
        <div class="top-frame">
            <button id="exitEditModeBtn">é€€å‡ºç¼–è¾‘</button>
            
            <!-- è¿æ¥çŠ¶æ€ -->
            <div class="connection-status">
                <div class="status-indicator"></div>
                <span class="status-text">æœªè¿æ¥</span>
            </div>
            
            <!-- å½“å‰æ—¶é—´ -->
            <div class="current-time">00:00:00</div>
            
            <!-- ç”µæ± çŠ¶æ€ -->
            <div class="battery-status">
                <div class="battery-icon">
                    <div class="battery-level" style="width: 70%;"></div>
                </div>
                <span class="battery-percentage">70%</span>
            </div>
            
            <!-- åˆ é™¤åŒºåŸŸæ–‡æœ¬ -->
            <div class="delete-zone-text">æ‹–åŠ¨åˆ°è¿™é‡Œåˆ é™¤ç»„ä»¶</div>
        </div>
        <div class="bottom-frame">
            <iframe src="unpaired.html" id="bottomFrame"></iframe>
        </div>
    </div>
    
    <!-- ç»Ÿä¸€èœå•é®ç½©å±‚ -->
    <div id="afcMenuOverlay"></div>
    
    <!-- ç»Ÿä¸€ä¾§è¾¹èœå• -->
    <div id="afcMenu" class="menu">
        <div class="menu-header">
            <div class="menu-title">AFCèœå•</div>
            <button class="menu-close" onclick="hideMenu('afcMenu')">Ã—</button>
        </div>
        <div class="menu-content">
            <div class="menu-item" onclick="toggleSubmenu('settingsSubmenu')">
                <div class="item-content">
                    <div class="item-icon">âš™ï¸</div>
                    <div class="item-text">è®¾ç½®</div>
                </div>
                <div class="item-arrow">â€º</div>
            </div>
            <div id="settingsSubmenu" class="submenu">
                <div class="submenu-item">
                    <div class="item-content">
                        <div class="item-icon">ğŸ“¡</div>
                        <div class="item-text">WiFi</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="wifiToggle" onchange="toggleWiFi(this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="submenu-item">
                    <div class="item-content">
                        <div class="item-icon">ğŸŒ™</div>
                        <div class="item-text">å¤œé—´æ¨¡å¼</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode(this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
            <div class="menu-item" onclick="handleMenuAction('afcMenu', 'action1')">
                <div class="item-content">
                    <div class="item-icon">ğŸ“Š</div>
                    <div class="item-text">åŠŸèƒ½1</div>
                </div>
            </div>
            <div class="menu-item" onclick="handleMenuAction('afcMenu', 'action2')">
                <div class="item-content">
                    <div class="item-icon">âš¡</div>
                    <div class="item-text">åŠŸèƒ½2</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // åˆå§‹åŒ–å˜é‡
        let startX = 0;
        let startTime = 0;
        const minDistance = 100; // æœ€å°æ»‘åŠ¨è·ç¦»
        const maxTime = 500; // æœ€å¤§æ»‘åŠ¨æ—¶é—´ (æ¯«ç§’)
        let isDesktopEditMode = false; // æ¡Œé¢ç¼–è¾‘æ¨¡å¼çŠ¶æ€
        
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«
            initSwipeGesture();
            
            // åˆå§‹åŒ–åˆ é™¤åŒºåŸŸå’Œé€€å‡ºç¼–è¾‘æŒ‰é’®
            initEditModeControls();
            
            // åˆå§‹åŒ–çŠ¶æ€æŒ‡ç¤ºå™¨
            initStatusIndicators();
            
            // åˆ›å»ºæµ‹è¯•é¢æ¿
            createTestPanel();
        });
        
        // åˆå§‹åŒ–ç¼–è¾‘æ¨¡å¼æ§ä»¶
        function initEditModeControls() {
            const topFrame = document.querySelector('.top-frame');
            const exitBtn = document.getElementById('exitEditModeBtn');
            
            // ç§»é™¤å¯èƒ½å·²å­˜åœ¨çš„äº‹ä»¶ç›‘å¬
            exitBtn.removeEventListener('click', handleExitEditModeClick);
            
            // ç›´æ¥å®šä¹‰å¤„ç†å‡½æ•°ç”¨äºå¼•ç”¨
            function handleExitEditModeClick(e) {
                // é˜»æ­¢äº‹ä»¶å†’æ³¡å’Œé»˜è®¤è¡Œä¸º
                e.preventDefault();
                e.stopPropagation();
                
                console.log('é€€å‡ºç¼–è¾‘æ¨¡å¼æŒ‰é’®è¢«ç‚¹å‡» - äº‹ä»¶å¯¹è±¡ï¼š', e.type);
                
                const iframe = document.getElementById('bottomFrame');
                if (!iframe || !iframe.contentWindow) {
                    console.error('æ‰¾ä¸åˆ°iframeæˆ–iframe.contentWindow');
                    return;
                }
                
                // æ£€æŸ¥iframeæ˜¯å¦åŠ è½½å®Œæˆ
                if (iframe.contentDocument.readyState !== 'complete') {
                    console.error('iframeå°šæœªå®Œå…¨åŠ è½½');
                    return;
                }
                
                // æ‰“å°å¯ç”¨çš„æ–¹æ³•ä»¥è¿›è¡Œè°ƒè¯•
                console.log('iframe window æ–¹æ³•ï¼š', Object.keys(iframe.contentWindow));
                
                try {
                    console.log('å°è¯•è°ƒç”¨iframeçš„exitEditModeå‡½æ•°');
                    // ç›´æ¥è°ƒç”¨
                    iframe.contentWindow.exitEditMode();
                    console.log('exitEditModeå‡½æ•°è°ƒç”¨æˆåŠŸ');
                    
                    // æ›´æ–°ç¼–è¾‘æ¨¡å¼çŠ¶æ€
                    isDesktopEditMode = false;
                    
                    // æ›´æ–°é¡¶éƒ¨æ¡†æ¶çŠ¶æ€
                    topFrame.classList.remove('delete-active');
                    topFrame.classList.remove('drag-over');
                    exitBtn.style.display = 'none';
                } catch (error) {
                    console.error('è°ƒç”¨iframeçš„exitEditModeå‡½æ•°å¤±è´¥:', error);
                    
                    // å°è¯•ä½¿ç”¨evalä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ
                    try {
                        console.log('å°è¯•ä½¿ç”¨evalè°ƒç”¨exitEditMode');
                        iframe.contentWindow.eval('if(typeof exitEditMode === "function") exitEditMode();');
                        
                        // æ›´æ–°ç¼–è¾‘æ¨¡å¼çŠ¶æ€
                        isDesktopEditMode = false;
                        
                        // æ›´æ–°é¡¶éƒ¨æ¡†æ¶çŠ¶æ€
                        topFrame.classList.remove('delete-active');
                        topFrame.classList.remove('drag-over');
                        exitBtn.style.display = 'none';
                    } catch (evalError) {
                        console.error('ä½¿ç”¨evalè°ƒç”¨exitEditModeå¤±è´¥:', evalError);
                    }
                }
            }
            
            // æ·»åŠ äº‹ä»¶ç›‘å¬
            exitBtn.addEventListener('click', handleExitEditModeClick);
            
            // è§¦æ‘¸è®¾å¤‡ä¸Šçš„æ”¯æŒ
            exitBtn.addEventListener('touchend', handleExitEditModeClick);
            
            // ä¸ºé¡¶éƒ¨åŒºåŸŸæ·»åŠ æ‹–æ”¾äº‹ä»¶ï¼ˆç”¨ä½œåˆ é™¤åŒºåŸŸï¼‰
            topFrame.addEventListener('dragover', function(e) {
                if (isDesktopEditMode) {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'move';
                    this.classList.add('drag-over');
                }
            });
            
            topFrame.addEventListener('dragleave', function(e) {
                this.classList.remove('drag-over');
            });
            
            topFrame.addEventListener('drop', function(e) {
                if (!isDesktopEditMode) return;
                
                e.preventDefault();
                this.classList.remove('drag-over');
                
                // è·å–ç»„ä»¶IDå¹¶è½¬å‘ç»™iframe
                const widgetId = e.dataTransfer.getData('text/plain');
                if (widgetId) {
                    // é€šçŸ¥iframeå¤„ç†åˆ é™¤
                    const iframe = document.getElementById('bottomFrame');
                    if (iframe && iframe.contentWindow) {
                        // ç§»é™¤å¯¹åº”ç»„ä»¶
                        const widgetElement = iframe.contentDocument.getElementById(widgetId);
                        if (widgetElement) {
                            widgetElement.remove();
                            
                            // é€šçŸ¥iframeæ›´æ–°ç®¡ç†å™¨
                            if (iframe.contentWindow.widgetManager) {
                                iframe.contentWindow.widgetManager.removeWidget(widgetId);
                                iframe.contentWindow.widgetManager.saveLayout();
                            }
                        }
                    }
                }
            });
            
            // æ”¹è¿›çš„è§¦æ‘¸äº‹ä»¶æ”¯æŒ
            let touchStartY = 0;
            let touchStartX = 0;
            let potentialDrag = false;
            
            // è®°å½•è§¦æ‘¸å¼€å§‹ä½ç½®
            topFrame.addEventListener('touchstart', function(e) {
                if (isDesktopEditMode && e.touches.length === 1) {
                    touchStartY = e.touches[0].clientY;
                    touchStartX = e.touches[0].clientX;
                    potentialDrag = true;
                    console.log('é¡¶éƒ¨åŒºåŸŸè§¦æ‘¸å¼€å§‹: ', touchStartX, touchStartY);
                }
            }, { passive: true });
            
            // å¤„ç†è§¦æ‘¸ç§»åŠ¨
            topFrame.addEventListener('touchmove', function(e) {
                if (!isDesktopEditMode || !potentialDrag) return;
                
                const touchY = e.touches[0].clientY;
                const touchX = e.touches[0].clientX;
                const deltaY = touchY - touchStartY;
                const deltaX = touchX - touchStartX;
                
                // åˆ¤æ–­æ˜¯å¦æ˜¯æœ‰æ•ˆçš„è§¦æ‘¸ç§»åŠ¨ï¼ˆé¿å…å°çš„æŠ–åŠ¨ï¼‰
                if (Math.abs(deltaY) > 10 || Math.abs(deltaX) > 10) {
                    console.log('é¡¶éƒ¨åŒºåŸŸæœ‰æ•ˆè§¦æ‘¸ç§»åŠ¨');
                    this.classList.add('drag-over');
                    
                    // é˜²æ­¢è§¦æ‘¸äº‹ä»¶ç»§ç»­ä¼ æ’­å’Œé»˜è®¤è¡Œä¸º
                    if (e.cancelable) {
                        e.preventDefault();
                    }
                    
                    // é€šçŸ¥iframeæœ‰æ‹–åŠ¨å‘ç”Ÿåœ¨åˆ é™¤åŒºåŸŸ
                    const iframe = document.getElementById('bottomFrame');
                    if (iframe && iframe.contentWindow && typeof iframe.contentWindow.onDeleteZoneDragOver === 'function') {
                        iframe.contentWindow.onDeleteZoneDragOver();
                    }
                }
            }, { passive: false });
            
            // å¤„ç†è§¦æ‘¸ç»“æŸ
            topFrame.addEventListener('touchend', function(e) {
                if (!isDesktopEditMode || !potentialDrag) return;
                
                console.log('é¡¶éƒ¨åŒºåŸŸè§¦æ‘¸ç»“æŸ');
                this.classList.remove('drag-over');
                potentialDrag = false;
                
                // é€šçŸ¥iframeæœ‰æ‹–åŠ¨é‡Šæ”¾åœ¨åˆ é™¤åŒºåŸŸ
                const iframe = document.getElementById('bottomFrame');
                if (iframe && iframe.contentWindow && typeof iframe.contentWindow.onDeleteZoneDrop === 'function') {
                    iframe.contentWindow.onDeleteZoneDrop(e.changedTouches[0].clientX, e.changedTouches[0].clientY);
                }
                
                // é˜²æ­¢è§¦æ‘¸äº‹ä»¶ç»§ç»­ä¼ æ’­
                if (e.cancelable) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            // è§¦æ‘¸å–æ¶ˆæ—¶æ¸…é™¤çŠ¶æ€
            topFrame.addEventListener('touchcancel', function() {
                console.log('é¡¶éƒ¨åŒºåŸŸè§¦æ‘¸å–æ¶ˆ');
                this.classList.remove('drag-over');
                potentialDrag = false;
            }, { passive: true });
        }
        
        // æ£€æŸ¥æ˜¯å¦åº”è¯¥åˆ é™¤ç»„ä»¶ - ç”±iframeè°ƒç”¨
        function checkDeleteWidget(clientX, clientY, widgetId) {
            if (!isDesktopEditMode) return false;
            
            console.log(`æ£€æŸ¥åˆ é™¤ï¼šè§¦æ‘¸ç‚¹åæ ‡(${clientX}, ${clientY}), ç»„ä»¶ID:${widgetId}`);
            
            // æ£€æŸ¥æ˜¯å¦åœ¨é¡¶éƒ¨åˆ é™¤åŒºåŸŸå†…
            const topFrame = document.querySelector('.top-frame');
            const rect = topFrame.getBoundingClientRect();
            console.log(`åˆ é™¤åŒºåŸŸèŒƒå›´: å·¦:${rect.left}, ä¸Š:${rect.top}, å³:${rect.right}, ä¸‹:${rect.bottom}`);
            
            // æ£€æŸ¥è§¦æ‘¸ç‚¹æ˜¯å¦åœ¨åˆ é™¤åŒºåŸŸå†…
            if (clientY >= rect.top && clientY <= rect.bottom &&
                clientX >= rect.left && clientX <= rect.right) {
                console.log(`ç»„ä»¶ ${widgetId} çš„è§¦æ‘¸ç‚¹åœ¨åˆ é™¤åŒºåŸŸå†…ï¼Œåº”è¯¥åˆ é™¤`);
                
                // æ·»åŠ è§†è§‰åé¦ˆ
                topFrame.classList.add('drag-over');
                setTimeout(() => {
                    topFrame.classList.remove('drag-over');
                }, 300);
                
                return true;
            }
            
            console.log(`ç»„ä»¶ ${widgetId} çš„è§¦æ‘¸ç‚¹ä¸åœ¨åˆ é™¤åŒºåŸŸå†…`);
            topFrame.classList.remove('drag-over');
            return false;
        }
        
        // æ¡Œé¢ç¼–è¾‘æ¨¡å¼çŠ¶æ€å˜åŒ–å¤„ç†
        function onDesktopEditModeChange(editMode) {
            console.log(`æ¡Œé¢ç¼–è¾‘æ¨¡å¼å˜åŒ–: ${editMode}`);
            isDesktopEditMode = editMode;
            
            // æ›´æ–°é¡¶éƒ¨æ¡†æ¶çŠ¶æ€
            const topFrame = document.querySelector('.top-frame');
            const exitBtn = document.getElementById('exitEditModeBtn');
            
            if (editMode) {
                // æ¿€æ´»åˆ é™¤åŒºåŸŸ
                topFrame.classList.add('delete-active');
                // æ˜¾ç¤ºé€€å‡ºæŒ‰é’®
                exitBtn.style.display = 'block';
            } else {
                // å…³é—­åˆ é™¤åŒºåŸŸ
                topFrame.classList.remove('delete-active');
                topFrame.classList.remove('drag-over');
                // éšè—é€€å‡ºæŒ‰é’®
                exitBtn.style.display = 'none';
            }
        }
        
        // æ·»åŠ æ–°å‡½æ•°ï¼Œç”¨äºå¤„ç†å®‰å“è®¾å¤‡ä¸Šçš„æ‹–åŠ¨é‡Šæ”¾
        function handleTouchDrop(clientX, clientY, widgetId) {
            if (!isDesktopEditMode) return false;
            
            // æ£€æŸ¥æ˜¯å¦åœ¨é¡¶éƒ¨åˆ é™¤åŒºåŸŸå†…
            const topFrame = document.querySelector('.top-frame');
            const rect = topFrame.getBoundingClientRect();
            
            if (clientY >= rect.top && clientY <= rect.bottom &&
                clientX >= rect.left && clientX <= rect.right) {
                console.log(`ç»„ä»¶ ${widgetId} é€šè¿‡è§¦æ‘¸é‡Šæ”¾åœ¨åˆ é™¤åŒºåŸŸå†…ï¼Œæ‰§è¡Œåˆ é™¤`);
                
                // åˆ é™¤ç»„ä»¶
                const iframe = document.getElementById('bottomFrame');
                if (iframe && iframe.contentWindow) {
                    // é€šçŸ¥iframeåˆ é™¤ç»„ä»¶
                    if (typeof iframe.contentWindow.deleteWidget === 'function') {
                        iframe.contentWindow.deleteWidget(widgetId);
                    }
                }
                
                // æ·»åŠ è§†è§‰åé¦ˆ
                topFrame.classList.add('drag-over');
                setTimeout(() => {
                    topFrame.classList.remove('drag-over');
                }, 300);
                
                return true;
            }
            
            return false;
        }
        
        // æš´éœ²å‡½æ•°ç»™iframeè°ƒç”¨
        window.checkDeleteWidget = checkDeleteWidget;
        window.onDesktopEditModeChange = onDesktopEditModeChange;
        window.handleTouchDrop = handleTouchDrop;
        
        // åˆå§‹åŒ–æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«
        function initSwipeGesture() {
            // æ»‘åŠ¨å¼€å§‹æ—¶è®°å½•ä½ç½®å’Œæ—¶é—´
            function handleTouchStart(e) {
                console.log('è§¦æ‘¸å¼€å§‹');
                // æ£€æŸ¥æ˜¯å¦æœ‰èœå•å·²ç»æ‰“å¼€
                const menu = document.getElementById('afcMenu');
                
                if ((menu && menu.style.right === '0px')) {
                    console.log('èœå•å·²æ‰“å¼€ï¼Œä¸å“åº”æ»‘åŠ¨æ‰‹åŠ¿');
                    return;
                }
                
                startX = e.touches[0].clientX;
                startTime = Date.now();
                console.log(`è®°å½•èµ·å§‹ä½ç½®: X=${startX}, æ—¶é—´=${startTime}`);
            }
            
            // æ»‘åŠ¨ç»“æŸæ—¶æ£€æŸ¥æ˜¯å¦ç¬¦åˆå·¦æ»‘æ¡ä»¶
            function handleTouchEnd(e) {
                console.log('è§¦æ‘¸ç»“æŸ');
                // æ£€æŸ¥æ˜¯å¦æœ‰èœå•å·²ç»æ‰“å¼€
                const menu = document.getElementById('afcMenu');
                
                if ((menu && menu.style.right === '0px')) {
                    console.log('èœå•å·²æ‰“å¼€ï¼Œä¸å“åº”æ»‘åŠ¨æ‰‹åŠ¿');
                    return;
                }
                
                // ç¡®ä¿è¿™æ˜¯ä¸€æ¬¡å•æŒ‡æ»‘åŠ¨
                if (e.changedTouches.length !== 1) {
                    console.log('éå•æŒ‡æ»‘åŠ¨ï¼Œå¿½ç•¥');
                    return;
                }
                
                const endX = e.changedTouches[0].clientX;
                const endTime = Date.now();
                const deltaX = endX - startX;
                const deltaTime = endTime - startTime;
                
                console.log(`æ»‘åŠ¨è·ç¦»: ${deltaX}px, æ—¶é—´: ${deltaTime}ms`);
                console.log(`åˆ¤æ–­æ¡ä»¶: è·ç¦»éœ€å¤§äº${minDistance}px, æ—¶é—´éœ€å°äº${maxTime}ms`);
                
                // å¦‚æœæ˜¯ä»å³å‘å·¦çš„å¿«é€Ÿæ»‘åŠ¨ï¼Œæ˜¾ç¤ºèœå•
                if (deltaX < -minDistance && deltaTime < maxTime) {
                    console.log('æ£€æµ‹åˆ°å·¦æ»‘æ‰‹åŠ¿ï¼Œæ˜¾ç¤ºèœå•');
                    showCombinedMenu();
                }
                
                // å¦‚æœæ˜¯ä»å·¦å‘å³çš„å¿«é€Ÿæ»‘åŠ¨ï¼Œéšè—èœå•
                if (deltaX > minDistance && deltaTime < maxTime) {
                    if (menu && menu.style.right === '0px') {
                        console.log('æ£€æµ‹åˆ°å³æ»‘æ‰‹åŠ¿ï¼Œéšè—èœå•');
                        hideMenu();
                    }
                }
            }
            
            // æ·»åŠ è§¦æ‘¸äº‹ä»¶ç›‘å¬
            document.addEventListener('touchstart', handleTouchStart, { passive: true });
            document.addEventListener('touchend', handleTouchEnd, { passive: true });
            
            console.log('æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«å·²åˆå§‹åŒ–');
        }
        
        // æ˜¾ç¤ºåˆå¹¶åçš„èœå•
        function showCombinedMenu() {
            console.log('æ˜¾ç¤ºèœå•');
            
            // ç›´æ¥è·å–å…ƒç´ 
            let menu = document.getElementById('afcMenu');
            let overlay = document.getElementById('afcMenuOverlay');
            let titleDiv = menu.querySelector('.menu-title');
            let menuContent = document.querySelector('.menu-content');
            
            if (!menu || !overlay) {
                console.error('èœå•å…ƒç´ ä¸å­˜åœ¨');
                return;
            }
            
            console.log('æ‰¾åˆ°èœå•å…ƒç´ ï¼Œå‡†å¤‡æ˜¾ç¤º');
            
            // æ£€æŸ¥æ¡Œé¢iframeæ˜¯å¦å¤„äºç¼–è¾‘æ¨¡å¼
            const iframe = document.getElementById('bottomFrame');
            let editMode = false;
            
            try {
                if (iframe && iframe.contentWindow) {
                    editMode = iframe.contentWindow.isEditMode && iframe.contentWindow.isEditMode();
                }
            } catch (e) {
                console.error('æ— æ³•è·å–iframeç¼–è¾‘æ¨¡å¼çŠ¶æ€', e);
            }
            
            // æ ¹æ®å½“å‰æ¨¡å¼æ˜¾ç¤ºä¸åŒçš„èœå•å†…å®¹
            if (editMode) {
                // ç¼–è¾‘æ¨¡å¼ - æ˜¾ç¤ºç»„ä»¶èœå•
                titleDiv.textContent = 'æ·»åŠ ç»„ä»¶';
                menuContent.innerHTML = `
                    <div class="widget-option" data-widget-id="system.small">
                        <div class="widget-option-icon">1x1</div>
                        <div class="widget-option-text">å°ç»„ä»¶</div>
                    </div>
                    <div class="widget-option" data-widget-id="system.medium">
                        <div class="widget-option-icon">3x1</div>
                        <div class="widget-option-text">ä¸­ç»„ä»¶</div>
                    </div>
                    <div class="widget-option" data-widget-id="system.large">
                        <div class="widget-option-icon">4x2</div>
                        <div class="widget-option-text">å¤§ç»„ä»¶</div>
                    </div>
                    <div class="widget-option" data-widget-id="user.custom">
                        <div class="widget-option-icon">2x2</div>
                        <div class="widget-option-text">è‡ªå®šä¹‰ç»„ä»¶</div>
                    </div>
                    <div class="widget-option" data-widget-id="system.model-name">
                        <div class="widget-option-icon">3x1</div>
                        <div class="widget-option-text">æ¨¡å‹åç§°</div>
                    </div>
                    <div class="widget-option" data-widget-id="system.model-image">
                        <div class="widget-option-icon">4x3</div>
                        <div class="widget-option-text">æ¨¡å‹å›¾ç‰‡</div>
                    </div>
                `;
                
                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                const options = menuContent.querySelectorAll('.widget-option');
                options.forEach(option => {
                    option.addEventListener('click', function() {
                        const widgetId = this.dataset.widgetId;
                        // è°ƒç”¨iframeä¸­çš„å‡½æ•°æ·»åŠ ç»„ä»¶
                        if (iframe && iframe.contentWindow && iframe.contentWindow.addWidgetFromParent) {
                            iframe.contentWindow.addWidgetFromParent(widgetId);
                            hideMenu();
                        } else {
                            console.error('æ— æ³•è°ƒç”¨iframeä¸­çš„addWidgetFromParentå‡½æ•°');
                        }
                    });
                });
            } else {
                // æ™®é€šæ¨¡å¼ - æ˜¾ç¤ºAFCèœå•
                titleDiv.textContent = 'AFCèœå•';
                menuContent.innerHTML = `
                    <div class="menu-item" onclick="showSettingsMenu()">
                        <div class="item-content">
                            <div class="item-icon">âš™ï¸</div>
                            <div class="item-text">è®¾ç½®</div>
                        </div>
                        <div class="item-arrow">â€º</div>
                    </div>
                    <div class="menu-item" onclick="handleMenuAction('afcMenu', 'action1')">
                        <div class="item-content">
                            <div class="item-icon">ğŸ“Š</div>
                            <div class="item-text">åŠŸèƒ½1</div>
                        </div>
                    </div>
                    <div class="menu-item" onclick="handleMenuAction('afcMenu', 'action2')">
                        <div class="item-content">
                            <div class="item-icon">âš¡</div>
                            <div class="item-text">åŠŸèƒ½2</div>
                        </div>
                    </div>
                `;
            }
            
            // æ˜¾ç¤ºèœå•å’Œé®ç½©
            overlay.style.display = 'block';
            menu.classList.add('show');
            
            // æ·»åŠ é®ç½©ç‚¹å‡»äº‹ä»¶
            overlay.onclick = hideMenu;
            
            console.log('èœå•å·²æ˜¾ç¤º');
        }
        
        // æ˜¾ç¤ºè®¾ç½®èœå•
        function showSettingsMenu() {
            const menu = document.getElementById('afcMenu');
            const titleDiv = menu.querySelector('.menu-title');
            const menuContent = document.querySelector('.menu-content');
            
            // æ›´æ–°èœå•æ ‡é¢˜å’Œå†…å®¹
            titleDiv.textContent = 'è®¾ç½®';
            menuContent.innerHTML = `
                <div class="menu-item" onclick="handleMenuAction('settingsMenu', 'wifi')">
                    <div class="item-content">
                        <div class="item-icon">ğŸ“¡</div>
                        <div class="item-text">WiFi</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="wifiToggle" onchange="toggleWiFi(this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="menu-item" onclick="handleMenuAction('settingsMenu', 'darkMode')">
                    <div class="item-content">
                        <div class="item-icon">ğŸŒ™</div>
                        <div class="item-text">å¤œé—´æ¨¡å¼</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode(this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="menu-item" onclick="showCombinedMenu()">
                    <div class="item-content">
                        <div class="item-icon">â†</div>
                        <div class="item-text">è¿”å›</div>
                    </div>
                </div>
            `;
        }
        
        // éšè—èœå•
        function hideMenu() {
            console.log('éšè—èœå•');
            
            // ç›´æ¥è·å–å…ƒç´ 
            const menu = document.getElementById('afcMenu');
            const overlay = document.getElementById('afcMenuOverlay');
            
            if (!menu || !overlay) {
                console.error('èœå•å…ƒç´ ä¸å­˜åœ¨');
                return;
            }
            
            menu.classList.remove('show');
            overlay.style.display = 'none';
            
            console.log('èœå•å·²éšè—');
        }
        
        // åˆå§‹åŒ–çŠ¶æ€æŒ‡ç¤ºå™¨
        function initStatusIndicators() {
            // åˆå§‹åŒ–å½“å‰æ—¶é—´
            updateTime();
            setInterval(updateTime, 1000);
            
            // æ¨¡æ‹Ÿè¿æ¥çŠ¶æ€å˜åŒ–
            updateConnectionStatus('connected');
            
            // æ¨¡æ‹Ÿç”µæ± çŠ¶æ€
            updateBatteryStatus(70, false);
            
            // å°è¯•ä½¿ç”¨Battery API (å¦‚æœæµè§ˆå™¨æ”¯æŒ)
            if (navigator.getBattery) {
                navigator.getBattery().then(function(battery) {
                    updateBatteryFromAPI(battery);
                    
                    // ç›‘å¬ç”µæ± çŠ¶æ€å˜åŒ–
                    battery.addEventListener('levelchange', function() {
                        updateBatteryFromAPI(battery);
                    });
                    battery.addEventListener('chargingchange', function() {
                        updateBatteryFromAPI(battery);
                    });
                });
            }
        }
        
        // æ›´æ–°æ—¶é—´æ˜¾ç¤º
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            document.querySelector('.current-time').textContent = timeStr;
        }
        
        // æ›´æ–°è¿æ¥çŠ¶æ€
        function updateConnectionStatus(status) {
            const indicator = document.querySelector('.status-indicator');
            const statusText = document.querySelector('.status-text');
            
            // ç§»é™¤æ‰€æœ‰çŠ¶æ€ç±»
            indicator.classList.remove('status-connected', 'status-disconnected', 'status-transmitting');
            
            // æ ¹æ®çŠ¶æ€è®¾ç½®æ ·å¼å’Œæ–‡æœ¬
            switch(status) {
                case 'connected':
                    indicator.classList.add('status-connected');
                    statusText.textContent = 'å·²è¿æ¥';
                    break;
                case 'disconnected':
                    indicator.classList.add('status-disconnected');
                    statusText.textContent = 'æœªè¿æ¥';
                    break;
                case 'transmitting':
                    indicator.classList.add('status-transmitting');
                    statusText.textContent = 'ä¼ è¾“ä¸­';
                    break;
                default:
                    indicator.classList.add('status-disconnected');
                    statusText.textContent = 'æœªè¿æ¥';
            }
        }
        
        // æ›´æ–°ç”µæ± çŠ¶æ€
        function updateBatteryStatus(level, isCharging) {
            const batteryLevel = document.querySelector('.battery-level');
            const batteryPercentage = document.querySelector('.battery-percentage');
            
            // ç§»é™¤æ‰€æœ‰çŠ¶æ€ç±»
            batteryLevel.classList.remove('battery-low', 'battery-charging');
            
            // è®¾ç½®ç”µé‡ç™¾åˆ†æ¯”
            batteryLevel.style.width = `${level}%`;
            batteryPercentage.textContent = `${level}%`;
            
            // æ ¹æ®ç”µé‡å’Œå……ç”µçŠ¶æ€è®¾ç½®æ ·å¼
            if (isCharging) {
                batteryLevel.classList.add('battery-charging');
            } else if (level <= 20) {
                batteryLevel.classList.add('battery-low');
            }
        }
        
        // ä»Battery APIæ›´æ–°ç”µæ± çŠ¶æ€
        function updateBatteryFromAPI(battery) {
            const level = Math.round(battery.level * 100);
            const isCharging = battery.charging;
            updateBatteryStatus(level, isCharging);
        }
        
        // åˆ‡æ¢äºŒçº§èœå•æ˜¾ç¤º/éšè—
        function toggleSubmenu(submenuId) {
            const submenu = document.getElementById(submenuId);
            submenu.classList.toggle('show');
        }
        
        // WiFiå¼€å…³å¤„ç†
        function toggleWiFi(enabled) {
            console.log('WiFiçŠ¶æ€:', enabled ? 'å¼€å¯' : 'å…³é—­');
            // TODO: å®ç°WiFiå¼€å…³åŠŸèƒ½
        }
        
        // å¤œé—´æ¨¡å¼å¼€å…³å¤„ç†
        function toggleDarkMode(enabled) {
            console.log('å¤œé—´æ¨¡å¼çŠ¶æ€:', enabled ? 'å¼€å¯' : 'å…³é—­');
            // TODO: å®ç°å¤œé—´æ¨¡å¼å¼€å…³åŠŸèƒ½
        }
        
        // åˆ›å»ºæµ‹è¯•é¢æ¿
        function createTestPanel() {
            // åˆ›å»ºæµ‹è¯•é¢æ¿å®¹å™¨
            const testPanel = document.createElement('div');
            testPanel.id = 'testPanel';
            testPanel.style.position = 'fixed';
            testPanel.style.bottom = '60px';
            testPanel.style.right = '10px';
            testPanel.style.width = '200px';
            testPanel.style.backgroundColor = 'white';
            testPanel.style.boxShadow = '0 0 10px rgba(0,0,0,0.2)';
            testPanel.style.borderRadius = '5px';
            testPanel.style.padding = '10px';
            testPanel.style.zIndex = '9998';
            testPanel.style.display = 'none';
            
            // æ·»åŠ æ ‡é¢˜
            const title = document.createElement('div');
            title.textContent = 'æµ‹è¯•æ§åˆ¶é¢æ¿';
            title.style.fontWeight = 'bold';
            title.style.marginBottom = '10px';
            title.style.borderBottom = '1px solid #eee';
            title.style.paddingBottom = '5px';
            
            // æ·»åŠ è¿æ¥/æ–­å¼€æŒ‰é’®
            const connectionBtn = document.createElement('button');
            connectionBtn.id = 'connectionTestBtn';
            connectionBtn.textContent = 'è¿æ¥è®¾å¤‡';
            connectionBtn.style.width = '100%';
            connectionBtn.style.padding = '8px';
            connectionBtn.style.margin = '5px 0';
            connectionBtn.style.backgroundColor = '#2196F3';
            connectionBtn.style.color = 'white';
            connectionBtn.style.border = 'none';
            connectionBtn.style.borderRadius = '4px';
            connectionBtn.style.cursor = 'pointer';
            
            let isConnected = false; // é»˜è®¤æœªè¿æ¥çŠ¶æ€
            
            connectionBtn.onclick = function() {
                if (isConnected) {
                    // æ–­å¼€è¿æ¥
                    isConnected = false;
                    connectionBtn.textContent = 'è¿æ¥è®¾å¤‡';
                    connectionBtn.style.backgroundColor = '#2196F3';
                    
                    // æ›´æ–°é¡¶éƒ¨çŠ¶æ€
                    updateConnectionStatus('disconnected');
                    
                    // åˆ‡æ¢åˆ°æœªå¯¹é¢‘ç•Œé¢
                    const iframe = document.getElementById('bottomFrame');
                    iframe.src = 'unpaired.html';
                    
                    console.log('æ¨¡æ‹Ÿè®¾å¤‡æ–­å¼€è¿æ¥');
                } else {
                    // è¿æ¥è®¾å¤‡
                    isConnected = true;
                    connectionBtn.textContent = 'æ–­å¼€è¿æ¥';
                    connectionBtn.style.backgroundColor = '#F44336';
                    
                    // æ›´æ–°é¡¶éƒ¨çŠ¶æ€
                    updateConnectionStatus('connected');
                    
                    // åˆ‡æ¢åˆ°å·²å¯¹é¢‘ç•Œé¢
                    const iframe = document.getElementById('bottomFrame');
                    iframe.src = 'desktop.html';
                    
                    console.log('æ¨¡æ‹Ÿè®¾å¤‡è¿æ¥æˆåŠŸ');
                }
            };
            
            // å…³é—­æŒ‰é’®
            const closeBtn = document.createElement('button');
            closeBtn.textContent = 'å…³é—­';
            closeBtn.style.width = '100%';
            closeBtn.style.padding = '8px';
            closeBtn.style.margin = '5px 0';
            closeBtn.style.backgroundColor = '#757575';
            closeBtn.style.color = 'white';
            closeBtn.style.border = 'none';
            closeBtn.style.borderRadius = '4px';
            closeBtn.style.cursor = 'pointer';
            
            closeBtn.onclick = function() {
                hideTestPanel();
            };
            
            // ç»„è£…é¢æ¿
            testPanel.appendChild(title);
            testPanel.appendChild(connectionBtn);
            testPanel.appendChild(closeBtn);
            
            document.body.appendChild(testPanel);
        }
        
        // æ˜¾ç¤ºæµ‹è¯•é¢æ¿
        function showTestPanel() {
            const testPanel = document.getElementById('testPanel');
            testPanel.style.display = 'block';
        }
        
        // éšè—æµ‹è¯•é¢æ¿
        function hideTestPanel() {
            const testPanel = document.getElementById('testPanel');
            testPanel.style.display = 'none';
        }
    </script>
</body>
</html> 